---
title: Week 9
format: 
  revealjs:
    css: ./libs/custom_css.css
    theme: white
    progress: true
    transition: convex
    reveal_plugins: ['notes']
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = './')
source("resources/preamble.R")
set.seed(0121)
library(igraph)
library(tidygraph)
library(ggraph)
library(tidyverse)
```

## Dad Joke

Why did the raisin go out with the prune?

<span class='fragment'>
Because he couldn't find a date. 
</span>

## Housekeeping

> - Thursday - 6 Degrees of Wikipedia + R Review
> - Self-assessment reflections and Lab 6 due next week

## Review Questions

> - What is a degree distribution?

<div style="position:relative; width:640px; height:480px; margin:0 auto;">
<div class='fragment' style="position:absolute;top:0;left:0;">
```{r}
set_graph_style()

G = play_barabasi_albert(10000, growth = 1, power = 1)

df = G %>% 
  as_tbl_graph() %>%
  activate(nodes) %>%
  mutate(degree = centrality_degree(mode='all')) %>%
  as_tibble() %>%
  group_by(degree) %>%
  tally(name = 'count')


df %>% 
  filter(degree > 1) %>%
  ggplot(aes(x = degree, y = count)) + 
  geom_line() + 
  theme_minimal() +
  labs(title="All nodes")

```

</div>

<div class='fragment' style="position:absolute;top:0;left:0;">
```{r}
df %>% 
  filter(degree > 2) %>%
  ggplot(aes(x = degree, y = count)) + 
  geom_line() + 
  theme_minimal() + 
  labs(title="Nodes with degree of at least 3")
```
</div>

<div class='fragment' style="position:absolute;top:0;left:0;">
```{r}
df %>% 
  filter(degree > 3) %>%
  ggplot(aes(x = degree, y = count)) + 
  geom_line() + 
  theme_minimal() + 
  labs(title="Nodes with degree of at least 4")
```

</div>
</div>

## Review Questions

> - What is a scale-free distribution?
> -	When/where do we find scale-free distributions?
> - What is an example of a network that would *not* have a scale-free distribution?
> - What are the benefits of scale-free networks?

## Review Questions

> - What is the "friendship paradox"?
> - How is the friendship paradox useful?

<span class='fragment'>
```{r, out.width="45%"}

set_graph_style()

G = barabasi.game(10, m = 2)

G = G %>% as_tbl_graph() %>%
  mutate(degree = centrality_degree(mode='all'),
         neighbor_degree = local_ave_degree())
p = G %>% 
  ggraph(layout = 'kk') +
  geom_edge_fan() +
  geom_node_point(color='lightblue', size = 16) +
  geom_node_text(aes(label=degree), size = 12, fontface='bold')
 
p
```
</span>
<span class='fragment'>
```{r, out.width="45%"}

p + 
  geom_node_point(aes(color = neighbor_degree > degree), size = 16) +
  geom_node_text(aes(label=round(neighbor_degree, 2)), nudge_y = -.1, size=9) +
  geom_node_text(aes(label=degree), nudge_y = .1, size=9) +
  scale_color_viridis_d("Neighbors have higher degree", begin = .6, end = .85, )

```
</span>

## Discussion Questions


## Visualization Challenge

